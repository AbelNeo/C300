<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Store Item Creator</title>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FootMaster Pro - Club Management</title>
    <link rel="stylesheet" href="css/styles.css">
<script type="importmap">
{
  "imports": {
    "firebase/app": "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js",
    "firebase/auth": "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js",
    "firebase/firestore": "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"
  }
}
</script>
<script type="module" src="js\firebase.js"></script>
<script type="module" src="js\players.js"></script>
<script type="module" src="js\main.js"></script>
<script type="module" src="components\navbar-component.js" ></script>




  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f9f9f9;
    }
    h1 {
      text-align: center;
    }
    form {
      max-width: 500px;
      margin: 0 auto 30px;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px #ccc;
    }
    label {
      display: block;
      margin: 10px 0 5px;
    }
    input[type="text"],
    input[type="number"],
    textarea,
    input[type="file"] {
      width: 100%;
      padding: 8px;
      box-sizing: border-box;
      border-radius: 4px;
      border: 1px solid #ccc;
      font-size: 1em;
    }
    textarea {
      resize: vertical;
      min-height: 60px;
    }
    button, .buy-button, .edit-btn, .delete-btn {
      margin-top: 5px;
      padding: 6px 10px;
      background-color: #27ae60;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9em;
    }
    .edit-btn {
      background-color: #2980b9;
    }
    .save-btn {
      background-color: #f39c12;
    }
    .delete-btn {
      background-color: #c0392b;
    }
    table {
      width: 95%;
      margin: 0 auto;
      border-collapse: collapse;
      background: white;
      box-shadow: 0 0 10px #ccc;
    }
    th, td {
      padding: 12px;
      border: 1px solid #ddd;
      text-align: center;
    }
    th {
      background-color: #27ae60;
      color: white;
    }
    td img {
      max-width: 80px;
      max-height: 80px;
      border-radius: 5px;
    }
    .buy-section {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .buy-section input[type="number"] {
      width: 60px;
      margin-bottom: 5px;
      padding: 5px;
    }
    .action-buttons {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
  </style>
</head>
<body>
      <header>
 <navbar-component></navbar-component>
    </header>

  <h1>Create Store Items</h1>

  <form id="itemForm">
    <label for="name">Item Name:</label>
    <input type="text" id="name" required />

    <label for="description">Item Description:</label>
    <textarea id="description" required></textarea>

    <label for="price">Price ($):</label>
    <input type="number" id="price" step="0.01" min="0" required />

    <label for="stock">Stock Quantity:</label>
    <input type="number" id="stock" min="0" required />

    <label for="image">Upload Image:</label>
    <input type="file" id="image" accept="image/*" multiple />

    <button type="submit">Add Item</button>
  </form>

  <table id="itemsTable" style="display: none;">
    <thead>
      <tr>
        <th>Image</th>
        <th>Name</th>
        <th>Description</th>
        <th>Price ($)</th>
        <th>Stock</th>
        <th>Buy</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    const form = document.getElementById('itemForm');
    const table = document.getElementById('itemsTable');
    const tbody = table.querySelector('tbody');

    let storeItems = JSON.parse(localStorage.getItem('storeItems') || '[]');

    function renderTable() {
      tbody.innerHTML = '';
      storeItems.forEach((item, index) => {
        const row = document.createElement('tr');

        // Image
        const imageCell = document.createElement('td');
        if (item.images.length > 0) {
          const img = document.createElement('img');
          img.src = item.images[0];
          imageCell.appendChild(img);
        } else {
          imageCell.textContent = 'No image';
        }

        const nameCell = document.createElement('td');
        nameCell.textContent = item.name;

        const descCell = document.createElement('td');
        descCell.textContent = item.description;

        const priceCell = document.createElement('td');
        priceCell.innerHTML = `
          <span class="price-text">${item.price}</span>
          <input type="number" step="0.01" class="price-edit" value="${item.price}" style="display:none; width:60px;">
        `;

        const stockCell = document.createElement('td');
        stockCell.innerHTML = `
          <span class="stock-text">${item.stock}</span>
          <input type="number" class="stock-edit" value="${item.stock}" style="display:none; width:60px;">
        `;

        const buyCell = document.createElement('td');
        const qtyInput = document.createElement('input');
        qtyInput.type = 'number';
        qtyInput.min = 1;
        qtyInput.value = 1;

        const buyBtn = document.createElement('button');
        buyBtn.textContent = 'Buy';
        buyBtn.className = 'buy-button';

        if (item.stock <= 0) {
          buyBtn.disabled = true;
          qtyInput.disabled = true;
        }

        buyBtn.addEventListener('click', () => {
          const qty = parseInt(qtyInput.value);
          if (isNaN(qty) || qty <= 0 || qty > item.stock) {
            alert(`Invalid quantity. Only ${item.stock} in stock.`);
            return;
          }
          item.stock -= qty;
          localStorage.setItem('storeItems', JSON.stringify(storeItems));
          renderTable();
        });

        const buySection = document.createElement('div');
        buySection.className = 'buy-section';
        buySection.appendChild(qtyInput);
        buySection.appendChild(buyBtn);
        buyCell.appendChild(buySection);

        const actionCell = document.createElement('td');
        const actionButtons = document.createElement('div');
        actionButtons.className = 'action-buttons';

        // Edit
        const editBtn = document.createElement('button');
        editBtn.textContent = 'Edit';
        editBtn.className = 'edit-btn';

        editBtn.addEventListener('click', () => {
          const editing = editBtn.textContent === 'Save';
          const priceText = priceCell.querySelector('.price-text');
          const priceInput = priceCell.querySelector('.price-edit');
          const stockText = stockCell.querySelector('.stock-text');
          const stockInput = stockCell.querySelector('.stock-edit');

          if (!editing) {
            priceText.style.display = 'none';
            priceInput.style.display = 'inline-block';
            stockText.style.display = 'none';
            stockInput.style.display = 'inline-block';
            editBtn.textContent = 'Save';
            editBtn.className = 'save-btn';
          } else {
            const newPrice = parseFloat(priceInput.value).toFixed(2);
            const newStock = parseInt(stockInput.value);
            if (isNaN(newPrice) || isNaN(newStock)) return;

            item.price = newPrice;
            item.stock = newStock;
            localStorage.setItem('storeItems', JSON.stringify(storeItems));
            renderTable();
          }
        });

        // Delete
        const deleteBtn = document.createElement('button');
        deleteBtn.textContent = 'Delete';
        deleteBtn.className = 'delete-btn';

        deleteBtn.addEventListener('click', () => {
          if (confirm('Are you sure you want to delete this item?')) {
            storeItems.splice(index, 1);
            localStorage.setItem('storeItems', JSON.stringify(storeItems));
            renderTable();
          }
        });

        actionButtons.appendChild(editBtn);
        actionButtons.appendChild(deleteBtn);
        actionCell.appendChild(actionButtons);

        row.appendChild(imageCell);
        row.appendChild(nameCell);
        row.appendChild(descCell);
        row.appendChild(priceCell);
        row.appendChild(stockCell);
        row.appendChild(buyCell);
        row.appendChild(actionCell);

        tbody.appendChild(row);
      });

      table.style.display = storeItems.length ? 'table' : 'none';
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const name = form.name.value.trim();
      const description = form.description.value.trim();
      const price = parseFloat(form.price.value).toFixed(2);
      const stock = parseInt(form.stock.value);
      const files = form.image.files;

      const imagePromises = Array.from(files).map(file => {
        return new Promise(resolve => {
          const reader = new FileReader();
          reader.onload = e => resolve(e.target.result);
          reader.readAsDataURL(file);
        });
      });

      Promise.all(imagePromises).then(images => {
        storeItems.push({ name, description, price, stock, images });
        localStorage.setItem('storeItems', JSON.stringify(storeItems));
        renderTable();
        form.reset();
      });
    });

    renderTable();
  </script>

</body>
</html>
